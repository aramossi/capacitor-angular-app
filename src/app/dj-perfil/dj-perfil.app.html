<!-- DJ Profile Setup -->
<div class="homedj-background">
    <div class="dj-profile-container">
        <header class="profile-header">
            <div class="dj-perfil-menu">
                <button class="modern-back-btn" (click)="irHomeDj()" title="Principal">
                    <span class="menu-icon">ğŸ </span>
                    <span class="menu-text">Principal</span>
                </button>
                <button class="modern-back-btn" (click)="irPerfil()" title="Mi perfil">
                    <span class="menu-icon">ğŸ‘¤</span>
                    <span class="menu-text">Mi perfil</span>
                </button>
                <button class="modern-back-btn" (click)="irNotificaciones()" title="Notificaciones">
                    <span class="menu-icon">ğŸ””</span>
                    <span class="menu-text">Notificaciones</span>
                </button>
                <button class="modern-back-btn" (click)="cerrarSesion()" title="Cerrar sesiÃ³n">
                    <span class="menu-icon">â»</span>
                    <span class="menu-text">Cerrar sesiÃ³n</span>
                </button>
            </div>
        </header>
        <div class="profile-avatar-wrapper"
            style="margin: 1.5rem auto 2.5rem auto; display: flex; flex-direction: column; align-items: center;">
            <img class="profile-avatar" [src]="avatarUrl || getDefaultAvatar()" alt="Avatar DJ" />
            <label class="avatar-edit-btn" title="Editar Avatar">
                <span class="camera-icon">ğŸ“·</span>
                <input type="file" accept="image/*" (change)="onAvatarSelected($event)" style="display:none" />
            </label>
            <div *ngIf="avatarMessage" style="color:#2ecc40; margin-top:0.5rem; font-size:0.98rem;">{{avatarMessage}}
            </div>
            <div *ngIf="avatarError" style="color:#e53935; margin-top:0.5rem; font-size:0.98rem;">{{avatarError}}</div>
        </div>
        <!-- Campos de nombre y apellido -->
        <div class="profile-names-row">
            <div class="profile-name-field">
                <label>Nombre
                    <input type="text" [value]="userNombre" readonly />
                </label>
            </div>
            <div class="profile-name-field">
                <label>Apellido
                    <input type="text" [value]="userApellido" readonly />
                </label>
            </div>
        </div>
        <form class="profile-form" (ngSubmit)="guardarPerfil(); $event.preventDefault()">
            <label>
                Nombre artÃ­stico
                <div class="editable-row">
                    <input type="text" [(ngModel)]="nombreArtistico" name="nombreArtistico"
                        [readonly]="!editandoNombreArtistico" placeholder="DJ Aura" />
                    <button type="button" (click)="activarEdicion('nombreArtistico')"
                        style="background:none; border:none; cursor:pointer; color:#b3aefc; font-size:1.2rem;"
                        title="Editar"><span>âœï¸</span></button>
                    <button *ngIf="editandoNombreArtistico" type="button" (click)="desactivarEdicion('nombreArtistico')"
                        style="background:none; border:none; cursor:pointer; color:#2ecc40; font-size:1.2rem;"
                        title="Listo"><span>âœ”ï¸</span></button>
                </div>
            </label>
            <label>
                DescripciÃ³n
                <div class="editable-row">
                    <textarea [(ngModel)]="descripcion" name="descripcion" [readonly]="!editandoDescripcion"
                        placeholder="Cuenta tu historia..."></textarea>
                    <button type="button" (click)="activarEdicion('descripcion')"
                        style="background:none; border:none; cursor:pointer; color:#b3aefc; font-size:1.2rem;"
                        title="Editar"><span>âœï¸</span></button>
                    <button *ngIf="editandoDescripcion" type="button" (click)="desactivarEdicion('descripcion')"
                        style="background:none; border:none; cursor:pointer; color:#2ecc40; font-size:1.2rem;"
                        title="Listo"><span>âœ”ï¸</span></button>
                </div>
            </label>
            <div class="profile-section-label">GÃ©neros musicales</div>
            <div class="genre-chips" style="margin-bottom:0.5rem;">
                <span *ngIf="generos.length === 0" style="color:#b3aefc; opacity:0.7; font-size:0.98rem;">No has
                    agregado gÃ©neros aÃºn.</span>
                <span *ngFor="let genero of generos; let i = index" class="chip">
                    {{genero}}
                    <span class="chip-close" (click)="eliminarGenero(i)" title="Eliminar">Ã—</span>
                </span>
            </div>
            <div class="editable-row">
                <input class="genre-input" type="text" [(ngModel)]="nuevoGenero" name="nuevoGenero"
                    placeholder="Agregar gÃ©nero..." (keyup.enter)="agregarGenero()" />
                <button type="button" (click)="agregarGenero()"
                    style="background:none; border:none; color:#b3aefc; font-size:1.2rem; cursor:pointer;"
                    title="Agregar"><span>â•</span></button>
            </div>
            <label>
                Rider tÃ©cnico / Equipamiento
                <div class="editable-row">
                    <textarea [(ngModel)]="rider" name="rider" [readonly]="!editandoRider"
                        placeholder="Lista tus requerimientos tÃ©cnicos..."></textarea>
                    <button type="button" (click)="activarEdicion('rider')"
                        style="background:none; border:none; cursor:pointer; color:#b3aefc; font-size:1.2rem;"
                        title="Editar"><span>âœï¸</span></button>
                    <button *ngIf="editandoRider" type="button" (click)="desactivarEdicion('rider')"
                        style="background:none; border:none; cursor:pointer; color:#2ecc40; font-size:1.2rem;"
                        title="Listo"><span>âœ”ï¸</span></button>
                </div>
            </label>
            <button class="save-profile-btn" type="submit">ğŸ’¾ Guardar Perfil</button>
            <div *ngIf="avatarMessage" style="color:#2ecc40; margin-top:0.5rem; font-size:0.98rem; text-align:center;">
                {{avatarMessage}}</div>
        </form>
    </div>
</div>